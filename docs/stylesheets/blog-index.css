/*
 * Blog Listing Styles (blog-index.css)
 * =====================================
 * 
 * NOTE: We use -webkit-line-clamp for text truncation. The standard
 * `line-clamp` property lacks browser support (2024), so the -webkit
 * prefix is intentionally used for cross-browser compatibility.
 * 
 * PURPOSE: Style the blog listing page (/blog/) for consistent "media object"
 * post preview cards. Each card shows: thumbnail (25%) + content (75%).
 * 
 * SCOPING: All styles target `.md-post--excerpt` which is Material's class for
 * blog listing cards. This ensures full post pages remain unaffected.
 * 
 * STRUCTURE:
 * - Desktop: Horizontal flex row (image left 25%, content right 75%)
 * - Mobile: Vertical stack (image on top, content below)
 * - Tags hidden on listing (visible on tag pages and full posts)
 * - Excerpt text clamped to 2-3 lines
 */

/* =============================================================================
   BASE LAYOUT: Media Object Pattern (25/75 split)
   ============================================================================= */

/* Target excerpt cards in the blog listing only */
.md-blog .md-post--excerpt {
  display: flex;
  flex-direction: row;
  gap: 1.5rem;
  align-items: flex-start;
  padding: 1.25rem 0;
  border-bottom: 1px solid var(--md-default-fg-color--lightest);
}

.md-blog .md-post--excerpt:last-child {
  border-bottom: none;
}

/* =============================================================================
   THUMBNAIL COLUMN (Left side - 25%)
   ============================================================================= */

/* Media container holding the post image */
.md-blog .md-post--excerpt .md-post__media {
  flex: 0 0 25%;
  max-width: 240px;
  min-width: 160px;
}

/* Thumbnail image styling */
.md-blog .md-post--excerpt .md-post__media img {
  display: block;
  width: 100%;
  height: 140px;
  object-fit: cover;
  object-position: center;
  border-radius: 12px;
  background-color: var(--md-default-fg-color--lightest);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Subtle hover effect on thumbnail */
.md-blog .md-post--excerpt .md-post__media img:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* =============================================================================
   CONTENT COLUMN (Right side - 75%)
   ============================================================================= */

/* Content wrapper - takes remaining space */
.md-blog .md-post--excerpt .md-post__content {
  flex: 1 1 75%;
  min-width: 0; /* Prevent flex item overflow */
}

/* Post title styling */
.md-blog .md-post--excerpt .md-post__title {
  margin: 0 0 0.5rem 0;
  font-size: 1.25rem;
  line-height: 1.3;
}

.md-blog .md-post--excerpt .md-post__title a {
  color: var(--md-typeset-a-color, var(--md-primary-fg-color));
  text-decoration: none;
  transition: color 0.15s ease;
}

.md-blog .md-post--excerpt .md-post__title a:hover {
  color: var(--md-accent-fg-color);
  text-decoration: underline;
}

/* =============================================================================
   META LINE (date, category, read time)
   ============================================================================= */

.md-blog .md-post--excerpt .md-post__meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1rem;
  margin-bottom: 0.75rem;
  font-size: 0.8rem;
  color: var(--md-default-fg-color--light);
}

/* Individual meta items */
.md-blog .md-post--excerpt .md-post__meta > * {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
}

/* Icons in meta */
.md-blog .md-post--excerpt .md-post__meta svg {
  width: 14px;
  height: 14px;
  fill: currentColor;
  opacity: 0.7;
}

/* =============================================================================
   EXCERPT TEXT (clamped to 2-3 lines)
   ============================================================================= */

.md-blog .md-post--excerpt .md-post__excerpt,
.md-blog .md-post--excerpt .md-post__description {
  margin: 0 0 0.75rem 0;
  font-size: 0.95rem;
  line-height: 1.6;
  color: var(--md-default-fg-color--light);
  
  /* Multi-line text clamp (2 lines on desktop) */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Slightly more generous on larger screens */
@media (min-width: 1200px) {
  .md-blog .md-post--excerpt .md-post__excerpt,
  .md-blog .md-post--excerpt .md-post__description {
    -webkit-line-clamp: 3;
  }
}

/* Remove any internal margins from excerpt paragraphs */
.md-blog .md-post--excerpt .md-post__excerpt p,
.md-blog .md-post--excerpt .md-post__description p {
  margin: 0;
}

/* Hide headings that might appear in excerpt (like ## Description) */
.md-blog .md-post--excerpt .md-post__excerpt h2,
.md-blog .md-post--excerpt .md-post__excerpt h3,
.md-blog .md-post--excerpt .md-post__description h2,
.md-blog .md-post--excerpt .md-post__description h3 {
  display: none;
}

/* =============================================================================
   "READ MORE" LINK
   ============================================================================= */

.md-blog .md-post--excerpt .md-post__link,
.md-blog .md-post--excerpt a[href*="continue-reading"],
.md-blog .md-post--excerpt .md-typeset a:has(> .twemoji) {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--md-primary-fg-color);
  text-decoration: none;
  transition: color 0.15s ease, gap 0.15s ease;
}

.md-blog .md-post--excerpt .md-post__link:hover,
.md-blog .md-post--excerpt a[href*="continue-reading"]:hover {
  color: var(--md-accent-fg-color);
  gap: 0.5rem;
}

/* =============================================================================
   HIDE TAGS ON LISTING (keep for tag page and full posts)
   ============================================================================= */

.md-blog .md-post--excerpt .md-tags,
.md-blog .md-post--excerpt .md-post__tags {
  display: none !important;
}

/* =============================================================================
   RESPONSIVE: TABLET (adjust proportions)
   ============================================================================= */

@media (max-width: 1024px) {
  .md-blog .md-post--excerpt {
    gap: 1.25rem;
  }
  
  .md-blog .md-post--excerpt .md-post__media {
    flex: 0 0 30%;
    min-width: 140px;
  }
  
  .md-blog .md-post--excerpt .md-post__media img {
    height: 120px;
  }
  
  .md-blog .md-post--excerpt .md-post__title {
    font-size: 1.1rem;
  }
}

/* =============================================================================
   RESPONSIVE: MOBILE (stack vertically)
   ============================================================================= */

@media (max-width: 768px) {
  .md-blog .md-post--excerpt {
    flex-direction: column;
    gap: 1rem;
    padding: 1.25rem 0;
  }
  
  /* Image takes full width on mobile */
  .md-blog .md-post--excerpt .md-post__media {
    flex: 0 0 auto;
    width: 100%;
    max-width: none;
    min-width: auto;
  }
  
  .md-blog .md-post--excerpt .md-post__media img {
    width: 100%;
    height: 180px;
    border-radius: 10px;
  }
  
  /* Content takes full width */
  .md-blog .md-post--excerpt .md-post__content {
    flex: 1 1 auto;
    width: 100%;
  }
  
  /* Slightly larger title on mobile for tap targets */
  .md-blog .md-post--excerpt .md-post__title {
    font-size: 1.15rem;
    margin-bottom: 0.5rem;
  }
  
  /* Allow 3 lines on mobile since cards are taller */
  .md-blog .md-post--excerpt .md-post__excerpt,
  .md-blog .md-post--excerpt .md-post__description {
    -webkit-line-clamp: 3;
  }
  
  /* Stack meta items */
  .md-blog .md-post--excerpt .md-post__meta {
    gap: 0.25rem 0.75rem;
  }
}

/* =============================================================================
   DARK MODE ADJUSTMENTS
   ============================================================================= */

[data-md-color-scheme="slate"] .md-blog .md-post--excerpt {
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

[data-md-color-scheme="slate"] .md-blog .md-post--excerpt .md-post__media img {
  background-color: rgba(255, 255, 255, 0.05);
}

[data-md-color-scheme="slate"] .md-blog .md-post--excerpt .md-post__media img:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

/* =============================================================================
   UTILITY: Fix for posts without explicit image container
   Material sometimes wraps images differently
   ============================================================================= */

/* Ensure first image in excerpt acts as thumbnail */
.md-blog .md-post--excerpt > p:first-child > img:only-child,
.md-blog .md-post--excerpt article > p:first-child > img:only-child {
  width: 100%;
  height: 140px;
  object-fit: cover;
  border-radius: 12px;
}

/* =============================================================================
   ARCHIVE/CATEGORY PAGES: Inherit listing styles
   ============================================================================= */

.md-blog .md-post--excerpt {
  /* Ensure consistent appearance across archive/category pages too */
  container-type: inline-size;
}

/* Container query for future-proofing responsive behavior */
@container (max-width: 500px) {
  .md-blog .md-post--excerpt {
    flex-direction: column;
  }
}
